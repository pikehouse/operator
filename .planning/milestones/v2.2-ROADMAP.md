# Milestone v2.2: Agentic Remediations Demo

**Status:** ✅ SHIPPED 2026-01-27
**Phases:** 21-22
**Total Plans:** 3

## Overview

Upgrade both TiKV and rate limiter demos to show the complete agentic loop: fault injection leads to AI detection, diagnosis, auto-execute remediation action, and verification that the fix resolved the issue. This proves the operator can act autonomously, not just observe.

## Phases

### Phase 21: Agent Agentic Loop

**Goal:** Agent can execute recommended actions autonomously and verify the fix resolved the issue

**Dependencies:** v2.0 action framework, v2.1 multi-subject support

**Plans:** 2 plans

- [x] 21-01-PLAN.md — AgentRunner agentic execution with immediate validate/execute and verification
- [x] 21-02-PLAN.md — Demo configuration for EXECUTE mode and autonomous execution

**Details:**
- Propose → Validate → Execute → Verify flow in AgentRunner
- Fixed 5s delay for verification (fire-and-forget action propagation)
- Environment variables for mode configuration (OPERATOR_SAFETY_MODE, OPERATOR_APPROVAL_MODE)
- SubprocessManager.spawn() accepts env dict

### Phase 22: Demo Integration

**Goal:** Both demos show complete agentic remediation loop in action

**Dependencies:** Phase 21 (agent agentic loop)

**Plans:** 1 plan

- [x] 22-01-PLAN.md — Update demo chapter narratives for agentic remediation flow

**Details:**
- TiKV demo Stage 6 renamed to "AI Remediation" with transfer_leader/drain_store description
- Rate limiter demo Stages 5/9 renamed to "AI Remediation" with reset_counter description
- Consistent pattern: "Watch Agent panel for complete agentic loop" + numbered steps

---

## Milestone Summary

**Key Decisions:**
- Fixed 5s delay for verification (not adaptive polling) - sufficient for demo
- Simplified verification logs success if metrics observed (full invariant re-check is future work)
- Environment variables for mode configuration
- Parameter inference fallback when Claude returns empty params
- Prompt biased toward immediate action for demo

**Issues Resolved:**
- ActionRegistry.from_subject() doesn't exist → fixed to ActionRegistry(subject)
- Claude returns empty parameters → added inference from observation
- Claude recommends waiting → prompt updated to prefer immediate action
- Output not visible in TUI → added flush=True to prints

**Issues Deferred:**
- Adaptive polling for verification (fixed 5s delay works for demo)
- Full invariant re-check after action (metrics observation sufficient)

**Technical Debt Incurred:**
- Parameter inference is action-specific (only reset_counter and drain_store implemented)
- transfer_leader inference not possible without region queries

---

*For current project status, see .planning/ROADMAP.md*
