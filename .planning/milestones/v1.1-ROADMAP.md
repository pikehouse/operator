# Milestone v1.1: TUI Demo

**Status:** ✅ SHIPPED 2026-01-25
**Phases:** 7-11
**Total Plans:** 9

## Overview

Upgrade the demo to a Rich-based live dashboard showing the operator actually running with real daemon output, cluster health visualization, and key-press driven demo chapters.

## Phases

### Phase 7: TUI Foundation

**Goal**: Establish multi-panel layout with proper terminal management and async coordination
**Depends on**: Phase 6 (v1.0 complete)
**Requirements**: TUI-01
**Plans**: 2 plans

Plans:
- [x] 07-01-PLAN.md — OutputBuffer and 5-panel layout factory
- [x] 07-02-PLAN.md — TUIController with signal handling and verification

**Key deliverables:**
- OutputBuffer ring buffer with automatic oldest-removal
- 5-panel layout factory (cluster, monitor, agent, workload, narration)
- TUIController with signal-safe lifecycle
- Clean Ctrl+C shutdown without terminal corruption

### Phase 8: Subprocess Management

**Goal**: Run monitor and agent as real subprocesses with live output capture and graceful shutdown
**Depends on**: Phase 7
**Requirements**: SUB-01, SUB-02, SUB-03
**Plans**: 2 plans

Plans:
- [x] 08-01-PLAN.md — SubprocessManager class for spawn, capture, and terminate
- [x] 08-02-PLAN.md — TUIController integration with live output verification

**Key deliverables:**
- SubprocessManager with PYTHONUNBUFFERED=1, start_new_session=True
- SIGTERM → wait → SIGKILL shutdown sequence
- TaskGroup integration with reader tasks
- No orphan or zombie processes

### Phase 9: Cluster Health Display

**Goal**: Show live cluster status with color-coded health indicators and detection highlighting
**Depends on**: Phase 8
**Requirements**: TUI-02, TUI-04
**Plans**: 2 plans

Plans:
- [x] 09-01-PLAN.md — ClusterHealthPoller and health data types
- [x] 09-02-PLAN.md — TUIController integration with health display verification

**Key deliverables:**
- ClusterHealthPoller with PD API polling
- NodeHealth enum (UP, DOWN, OFFLINE, UNKNOWN)
- Color-coded health indicators (green/red)
- Detection highlighting via panel border color (cyan/yellow/red)

### Phase 10: Demo Flow Control

**Goal**: Enable key-press chapter progression with narration explaining each stage
**Depends on**: Phase 9
**Requirements**: DEMO-01, DEMO-02
**Plans**: 1 plan

Plans:
- [x] 10-01-PLAN.md — KeyboardTask and chapter narration integration

**Key deliverables:**
- KeyboardTask with select() timeout pattern
- Chapter/DemoState state machine
- 7 demo chapters with narration
- Progress indicator [X/7]
- SPACE/ENTER/RIGHT key navigation

### Phase 11: Fault Workflow Integration

**Goal**: Complete end-to-end demo with fault injection, workload degradation visualization, and recovery
**Depends on**: Phase 10
**Requirements**: TUI-03, DEMO-03, DEMO-04
**Plans**: 2 plans

Plans:
- [x] 11-01-PLAN.md — WorkloadTracker with sparkline visualization and YCSB integration
- [x] 11-02-PLAN.md — Fault workflow with countdown, injection, and recovery

**Key deliverables:**
- WorkloadTracker with sparklines library
- Degradation detection (current < baseline * 0.5)
- FaultWorkflow with countdown (3...2...1)
- Docker-based node kill and recovery
- Chapter on_enter callbacks with blocks_advance

---

## Milestone Summary

**Key Decisions:**
- Script entry point (scripts/run-tui.sh) instead of CLI command — demo is presentation tool, separate from operator
- Manual recovery in demo — v1.x is observe-only, agent actions in v2
- select() with timeout for keyboard — avoids readchar terminal conflicts
- PYTHONUNBUFFERED=1 for subprocess output — prevents buffering delays

**Issues Resolved:**
- Terminal corruption on Ctrl+C (signal handlers before Live context)
- Keyboard input blocking (select() with timeout in executor)
- PD "Disconnected" state not mapped (treated as DOWN)
- CLI module path incorrect for subprocess spawn

**Technical Debt:**
- Phase 9 missing formal VERIFICATION.md (has SUMMARYs)
- Human verification pending for visual/interactive behavior

---

*Archived: 2026-01-25*
*For current project status, see .planning/ROADMAP.md*
