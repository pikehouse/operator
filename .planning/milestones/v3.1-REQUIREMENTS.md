# Requirements Archive: v3.1 Demo Update

**Archived:** 2026-01-29
**Status:** ✅ SHIPPED

This is the archived requirements specification for v3.1.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

## v3.1 Requirements

Fix TUI demo to work with v3.0 agent_lab architecture.

### Demo Infrastructure

- [x] **DEMO-01**: Agent subprocess initializes database schema before first query
- [x] **DEMO-02**: Agent poll loop handles empty database gracefully (no tickets yet)
- [x] **DEMO-03**: Demo script ensures clean database state before starting
- [x] **DEMO-04**: TiKV demo runs end-to-end (startup → fault injection → agent diagnosis → resolution)
- [x] **DEMO-05**: Rate limiter demo runs end-to-end (same flow as TiKV)

### Agent Lifecycle

- [x] **DEMO-06**: Agent panel displays subprocess output (verify existing behavior works)
- [x] **DEMO-07**: Agent subprocess handles SIGTERM gracefully (marks session escalated on shutdown)

### Architecture

- [x] **ARCH-01**: Agent code (operator_core) contains no demo-specific logic (clean separation)

### Tests

- [x] **TEST-01**: Integration test verifies TiKV demo runs without errors (startup, fault, recovery)
- [x] **TEST-02**: Integration test verifies ratelimiter demo runs without errors (startup, fault, recovery)
- [x] **TEST-03**: Unit test verifies agent schema initialization works correctly

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| DEMO-01 | Phase 33 | Complete |
| DEMO-02 | Phase 33 | Complete |
| DEMO-03 | Phase 33 | Complete |
| DEMO-04 | Phase 34 | Complete |
| DEMO-05 | Phase 34 | Complete |
| DEMO-06 | Phase 34 | Complete |
| DEMO-07 | Phase 33 | Complete |
| ARCH-01 | Phase 33 | Complete |
| TEST-01 | Phase 34 | Complete |
| TEST-02 | Phase 34 | Complete |
| TEST-03 | Phase 33 | Complete |

---

## Milestone Summary

**Shipped:** 11 of 11 v3.1 requirements
**Adjusted:** TEST-01, TEST-02 validated manually rather than formal pytest
**Dropped:** None

---
*Archived: 2026-01-29 as part of v3.1 milestone completion*
